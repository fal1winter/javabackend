<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.liang.bbs.article.persistence.mapper.ScolarPoExMapper">
  <resultMap id="BaseResultMap" type="com.liang.bbs.article.persistence.entity.ScolarPo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="avatar_url" jdbcType="VARCHAR" property="avatarUrl" />
    <result column="institution" jdbcType="VARCHAR" property="institution" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="totalrate" jdbcType="VARCHAR" property="totalrate" />
    <result column="ratenum" jdbcType="INTEGER" property="ratenum" />
    <collection property="authorpos" ofType="map">
        <result property="paperId" column="paper_id"/>
        <result property="position" column="position"/>
    </collection>
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.liang.bbs.article.persistence.entity.ScolarPoWithBLOBs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="bio" jdbcType="LONGVARCHAR" property="bio" />
    <result column="collaborator_ids" jdbcType="LONGVARCHAR" property="collaboratorIds" />
  </resultMap>

  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, `name`, avatar_url, institution, create_time, update_time, totalrate, ratenum
  </sql>
  <sql id="Blob_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    bio, collaborator_ids
  </sql>

  <select id="searchfuzz" resultMap="BaseResultMap">
    SELECT * FROM bs_scholar
    <where>
        <if test="name != null and name != ''">
            AND name LIKE CONCAT('%', #{name}, '%')
        </if>
        <if test="institution != null and institution != ''">
            AND institution LIKE CONCAT('%', #{institution}, '%')
        </if>
        <if test="bio != null and bio != ''">
            AND bio LIKE CONCAT('%', #{bio}, '%')
        </if>
    </where>
</select>
</mapper>